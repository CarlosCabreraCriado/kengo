:host {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
  overflow: hidden;
  width: 100%;
}

.inicio-container {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
  padding-top: env(safe-area-inset-top, 0);
  overflow: hidden;
}

/* Header */
.inicio-header {
  flex-shrink: 0;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 1.5rem;
}

.logo {
  height: 2.5rem;
  width: auto;
  filter: brightness(0) saturate(100%) invert(42%) sepia(93%) saturate(636%)
    hue-rotate(338deg) brightness(97%) contrast(89%);
}

.logout-btn {
  color: #64748b;
  transition:
    color 0.2s ease,
    background-color 0.2s ease;

  &:hover {
    color: #e75c3e;
    background-color: rgba(231, 92, 62, 0.1);
  }
}

/* Carousel */
.carousel-wrapper {
  flex: 1;
  display: flex;
  align-items: center;
  overflow: hidden;
  min-height: 0; /* Importante para que flex funcione correctamente */
  width: 100%;
  max-width: 100vw;
}

.carousel {
  display: flex;
  align-items: center;
  height: 100%;
  width: 100%;
  gap: 1rem;
  overflow-x: auto;
  overflow-y: hidden;
  scroll-snap-type: x mandatory;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;

  /* Padding para centrar la primera y última card */
  padding: 2rem 5%; /* Padding vertical para que la sombra tenga espacio dentro del scroll */
  box-sizing: border-box;

  /* Ocultar scrollbar */
  scrollbar-width: none;
  -ms-overflow-style: none;

  &::-webkit-scrollbar {
    display: none;
  }
}

/* Cards */
.card {
  flex: 0 0 90%;
  scroll-snap-align: center;
  scroll-snap-stop: always; /* Fuerza a detenerse en cada card */
  position: relative;
  border-radius: 1.5rem;
  overflow: hidden;
  height: calc(
    100% - 3rem
  ); /* Dejar espacio para la sombra (1.5rem arriba + 1.5rem abajo) */
  max-height: calc(100% - 3rem);
  cursor: pointer;
  transition:
    transform 0.3s ease,
    box-shadow 0.3s ease;
  background: #1e2330;

  &:hover,
  &.active {
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
  }

  &:active {
    transform: scale(0.98);
  }
}

.card-image-container {
  position: absolute;
  inset: 0;
  overflow: hidden;
}

.card-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.5s ease;

  .card:hover & {
    transform: scale(1.05);
  }
}

.card-overlay {
  position: absolute;
  inset: 0;
  /*
  background: linear-gradient(
    180deg,
    transparent 50%,
    rgba(0, 0, 0, 0.6) 75%,
    rgba(0, 0, 0, 0.9) 100%
  );
    */
  background: linear-gradient(
    180deg,
    transparent 50%,
    #f9b87e 75%,
    #e75c3e 100%
  );
}

.card-content {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 2rem;
  z-index: 5;
}

.card-title {
  font-size: 1.75rem;
  font-weight: 500;
  color: #ad0000;
  margin: 0 0 0.5rem;
}

.card-subtitle {
  font-size: 1rem;
  color: rgba(255, 255, 255, 0.7);
  margin: 0;
  color: white;
}

/* Pagination dots */
.pagination-dots {
  flex-shrink: 0;
  display: flex;
  justify-content: center;
  gap: 0.5rem;
  padding: 1rem 0 1.5rem;
}

.dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  border: none;
  background: rgba(231, 92, 62, 0.3);
  padding: 0;
  cursor: pointer;
  transition:
    background 0.3s ease,
    transform 0.3s ease,
    width 0.3s ease;

  &:hover {
    background: rgba(231, 92, 62, 0.5);
  }

  &.active {
    width: 24px;
    border-radius: 4px;
    background: #e75c3e;
  }
}

/* Responsive adjustments para tablets (solo carrusel) */
@media (min-width: 768px) and (max-width: 1023px) {
  .greeting {
    font-size: 2rem;
  }

  .carousel {
    padding-left: 15%;
    padding-right: 15%;
  }

  .card {
    flex: 0 0 70%;
  }

  .card-title {
    font-size: 2rem;
  }
}

/* ============================================
// GRID LAYOUT PARA DESKTOP (>= 1024px)
// ============================================ */

.cards-grid-wrapper {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1.5rem 2rem;
  min-height: 0;
  overflow: hidden;
}

.cards-grid {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-content: center;
  gap: 1.5rem;
  width: 100%;
  max-width: 1400px;
  height: 100%;
  max-height: calc(100vh - 4rem); /* Solo padding (sin header en desktop) */
}

/* Cards en modo grid */
.card-grid {
  flex: 0 0 calc(50% - 1rem); /* 2 columnas por defecto */
  height: auto;
  min-height: 200px;
  max-height: 350px;
  aspect-ratio: 4 / 3;

  .card-title {
    font-size: 1.5rem;
  }

  .card-subtitle {
    font-size: 0.9rem;
  }

  .card-content {
    padding: 1.5rem;
  }

  /* Ajustar bonsái para cards más pequeñas */
  .bonsai-image {
    max-height: 80%;
    right: -10%;
  }

  /* Ajustar greeting para cards más pequeñas */
  .greeting-text {
    font-size: 1.25rem;
  }

  .user-avatar {
    width: 2.5rem;
    height: 2.5rem;
  }

  /* CTA button más compacto */
  .cta-button {
    padding: 0.75rem 1rem;
    font-size: 0.9rem;
  }

  .completed-message {
    padding: 0.75rem 1rem;
    font-size: 0.9rem;
  }
}

/* Grid específico según tamaño de pantalla */
@media (min-width: 1024px) {
  .card-grid {
    /* 2 columnas para tablets/desktop pequeño */
    flex: 0 0 calc(50% - 1rem);
  }
}

@media (min-width: 1280px) {
  .cards-grid {
    gap: 2rem;
    max-width: 1200px;
  }

  .card-grid {
    /* 3 columnas para pantallas grandes */
    flex: 0 0 calc(33.333% - 1.5rem);
    max-height: 400px;

    .card-title {
      font-size: 1.75rem;
    }
  }
}

@media (min-width: 1536px) {
  .cards-grid {
    max-width: 1400px;
    gap: 2.5rem;
  }

  .card-grid {
    /* Mantener 3 columnas, cards más grandes */
    flex: 0 0 calc(33.333% - 2rem);
    max-height: 450px;
  }
}

/* ============================================
// BADGE DINÁMICO EN TARJETA
// ============================================ */

.card-badge {
  position: absolute;
  top: 1rem;
  right: 1rem;
  z-index: 15;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  min-width: 2.5rem;
  min-height: 2.5rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  animation: fadeInScale 0.3s ease-out;

  /* Estado: Cargando */
  &[data-type="loading"] {
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(8px);
  }

  /* Estado: Pendientes (coral) */
  &[data-type="pending"] {
    background: #e75c3e;
    padding: 0.5rem 0.75rem;
    border-radius: 1rem;
  }

  /* Estado: Completado (gold) */
  &[data-type="completed"] {
    background: #efc048;
  }

  /* Estado: Descanso */
  &[data-type="rest"] {
    background: rgba(100, 116, 139, 0.8);
    backdrop-filter: blur(8px);
  }
}

.badge-number {
  color: white;
  font-weight: 700;
  font-size: 1rem;
  line-height: 1;
}

.badge-icon {
  color: white;
  font-size: 1.5rem !important;
  width: 1.5rem !important;
  height: 1.5rem !important;
}

.badge-spinner {
  width: 1.25rem;
  height: 1.25rem;
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-top-color: white;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* ============================================
// TARJETA ANIMADA - ACTIVIDAD DIARIA
// ============================================ */

.card-animated {
  background: linear-gradient(
    145deg,
    rgba(255, 237, 232, 0.7) 0%,
    rgba(254, 248, 247, 0.5) 50%,
    rgba(243, 236, 235, 0.6) 100%
  );
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.4);
  box-shadow:
    0 8px 32px rgba(231, 92, 62, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

.animated-background {
  position: absolute;
  inset: 0;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;

  /* Variables CSS para colores según estado (estilo glass) */
  --aurora-color-1: rgba(231, 92, 62, 0.4);
  --aurora-color-2: rgba(239, 192, 72, 0.35);
  --aurora-color-3: rgba(255, 180, 164, 0.3);
  --animation-duration: 8s;

  /* Estado: Pendientes - Colores coral/naranja vibrantes, animación más rápida */
  &[data-state="pending"] {
    --aurora-color-1: rgba(231, 92, 62, 0.5);
    --aurora-color-2: rgba(255, 120, 80, 0.4);
    --aurora-color-3: rgba(239, 192, 72, 0.35);
    --animation-duration: 5s;
  }

  /* Estado: Completado - Colores dorados/verdes vibrantes, animación más lenta */
  &[data-state="completed"] {
    --aurora-color-1: rgba(239, 192, 72, 0.5);
    --aurora-color-2: rgba(134, 239, 172, 0.4);
    --aurora-color-3: rgba(110, 231, 183, 0.35);
    --animation-duration: 12s;
  }

  /* Estado: Descanso - Colores azulados suaves, animación muy lenta */
  &[data-state="rest"] {
    --aurora-color-1: rgba(148, 163, 184, 0.35);
    --aurora-color-2: rgba(165, 180, 200, 0.3);
    --aurora-color-3: rgba(200, 210, 225, 0.25);
    --animation-duration: 15s;
  }

  /* Estado: Cargando - Colores neutros con pulso */
  &[data-state="loading"] {
    --aurora-color-1: rgba(200, 200, 210, 0.35);
    --aurora-color-2: rgba(220, 220, 230, 0.3);
    --aurora-color-3: rgba(230, 230, 240, 0.25);
    --animation-duration: 4s;
  }
}

/* Ondas de aurora */
.aurora-wave {
  position: absolute;
  border-radius: 50%;
  filter: blur(40px);
  opacity: 0.9;
  animation: auroraFloat var(--animation-duration) ease-in-out infinite;
  transition:
    background 1.5s ease,
    opacity 1s ease;
  mix-blend-mode: multiply;
}

.aurora-wave-1 {
  width: 120%;
  height: 60%;
  background: radial-gradient(
    ellipse,
    var(--aurora-color-1) 0%,
    transparent 70%
  );
  top: -20%;
  left: -10%;
  animation-delay: 0s;
}

.aurora-wave-2 {
  width: 100%;
  height: 80%;
  background: radial-gradient(
    ellipse,
    var(--aurora-color-2) 0%,
    transparent 70%
  );
  bottom: -30%;
  right: -20%;
  animation-delay: calc(var(--animation-duration) * -0.33);
  animation-name: auroraFloat2;
}

.aurora-wave-3 {
  width: 80%;
  height: 50%;
  background: radial-gradient(
    ellipse,
    var(--aurora-color-3) 0%,
    transparent 70%
  );
  top: 30%;
  left: 20%;
  animation-delay: calc(var(--animation-duration) * -0.66);
  animation-name: auroraFloat3;
}

/* Imagen del bonsái */
.bonsai-image {
  position: absolute;
  right: -5%;
  bottom: 0;
  z-index: 2;
  width: auto;
  height: 100%;
  max-height: 95%;
  object-fit: contain;
  object-position: right center;
  filter: drop-shadow(0 8px 24px rgba(0, 0, 0, 0.2));
  transition:
    transform 0.5s ease,
    filter 0.3s ease;
  opacity: 0.6;

  .card:hover & {
    transform: scale(1.02) translateX(-2%);
    filter: drop-shadow(0 12px 32px rgba(0, 0, 0, 0.25)) invert(1);
  }
}

/* Overlay especial para tarjeta animada (glass effect) */
.card-overlay-animated {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.1) 0%,
    transparent 30%,
    transparent 50%,
    rgba(255, 255, 255, 0.3) 70%,
    rgba(255, 255, 255, 0.6) 85%,
    rgba(255, 255, 255, 0.85) 100%
  );
  z-index: 3;
}

/* Texto oscuro para tarjeta con fondo claro */
.card-animated {
  .card-title {
    color: #1a1a1a;
  }

  .card-subtitle {
    color: rgba(26, 26, 26, 0.7);
  }
}

/* Info adicional de ejercicios */
.card-extra-info {
  margin-top: 0.75rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.progress-bar-container {
  width: 100%;
  height: 6px;
  background: rgba(0, 0, 0, 0.1);
  border-radius: 3px;
  overflow: hidden;

  .card-animated & {
    background: rgba(26, 26, 26, 0.15);
  }
}

.progress-bar-fill {
  height: 100%;
  background: #e75c3e;
  border-radius: 3px;
  transition: width 0.5s ease;

  .card-animated & {
    background: linear-gradient(90deg, #e75c3e, #efc048);
  }
}

.progress-text {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.6);

  .card-animated & {
    color: rgba(26, 26, 26, 0.6);
  }
}

.next-exercise {
  display: flex;
  align-items: center;
  gap: 0.35rem;
  font-size: 0.85rem;
  color: rgba(255, 255, 255, 0.8);
  margin: 0;
  font-weight: 500;

  .card-animated & {
    color: #e75c3e;
  }
}

.next-icon {
  font-size: 1.1rem !important;
  width: 1.1rem !important;
  height: 1.1rem !important;
}

/* Header superior de la tarjeta */
.card-header-top {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  padding: 1.25rem 1.5rem;
  z-index: 10;
}

/* Saludo con avatar */
.user-greeting {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.user-avatar {
  width: 3rem;
  height: 3rem;
  border-radius: 50%;
  overflow: hidden;
  background: linear-gradient(135deg, #e75c3e, #efc048);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  box-shadow: 0 2px 8px rgba(231, 92, 62, 0.3);
  border: 2px solid #e75c3e;

  img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  mat-icon {
    color: white;
    font-size: 1.5rem;
    width: 1.5rem;
    height: 1.5rem;
  }
}

.greeting-text {
  font-size: 1.5rem;
  font-weight: 600;
  color: #1a1a1a;
  margin: 0;
}

/* Call to Action button */
.cta-button {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  width: 100%;
  margin-top: 1rem;
  padding: 0.875rem 1.5rem;
  border: none;
  border-radius: 0.75rem;
  background: linear-gradient(135deg, #e75c3e, #d14d30);
  color: white;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 4px 12px rgba(231, 92, 62, 0.35);

  mat-icon {
    font-size: 1.25rem;
    width: 1.25rem;
    height: 1.25rem;
  }

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(231, 92, 62, 0.45);
  }

  &:active {
    transform: translateY(0);
  }
}

/* Mensaje de completado */
.completed-message {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  margin-top: 1rem;
  padding: 0.875rem 1.5rem;
  border-radius: 0.75rem;
  background: linear-gradient(135deg, #efc048, #d4a93d);
  color: white;
  font-weight: 600;
  box-shadow: 0 4px 12px rgba(239, 192, 72, 0.35);

  mat-icon {
    font-size: 1.25rem;
    width: 1.25rem;
    height: 1.25rem;
  }
}

/* Animaciones de las ondas aurora */
@keyframes auroraFloat {
  0%,
  100% {
    transform: translate(0, 0) scale(1);
    opacity: 0.6;
  }
  25% {
    transform: translate(5%, 10%) scale(1.1);
    opacity: 0.8;
  }
  50% {
    transform: translate(-5%, 5%) scale(0.95);
    opacity: 0.7;
  }
  75% {
    transform: translate(3%, -5%) scale(1.05);
    opacity: 0.85;
  }
}

@keyframes auroraFloat2 {
  0%,
  100% {
    transform: translate(0, 0) scale(1) rotate(0deg);
    opacity: 0.5;
  }
  33% {
    transform: translate(-8%, -5%) scale(1.15) rotate(5deg);
    opacity: 0.75;
  }
  66% {
    transform: translate(5%, 8%) scale(0.9) rotate(-3deg);
    opacity: 0.6;
  }
}

@keyframes auroraFloat3 {
  0%,
  100% {
    transform: translate(0, 0) scale(1);
    opacity: 0.55;
  }
  50% {
    transform: translate(10%, -10%) scale(1.2);
    opacity: 0.8;
  }
}
