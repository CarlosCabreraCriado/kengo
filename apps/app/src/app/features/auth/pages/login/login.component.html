<section
  class="absolute top-0 left-0 flex h-dvh w-screen items-center justify-center"
>
  <div
    class="flex w-80 flex-col justify-center rounded-2xl border-white/20 bg-white/60 px-6 py-3 shadow-xl backdrop-blur-md backdrop-filter"
  >
    <div
      class="baseline-end relative flex h-15 w-full items-end justify-center"
    >
      <img src="../../assets/logo.svg" class="relative h-[175%]" />
    </div>

    <div class="fuente-kengo mb-2 w-full text-center text-3xl">Kengo</div>
    <div class="relative">
      <form
        [formGroup]="loginForm"
        [class.invisible]="loading()"
        [attr.aria-hidden]="loading() ? 'true' : null"
        (ngSubmit)="onSubmit()"
        class="flex w-full flex-col gap-4"
      >
        <!-- Email field -->
        <div class="flex flex-col gap-1.5">
          <label for="email" class="text-sm font-medium text-gray-700">Email</label>
          <input
            id="email"
            type="email"
            formControlName="email"
            class="w-full rounded-xl border border-gray-300 bg-white px-3 py-2.5 text-base transition-all focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"
            [class.border-red-500]="email.invalid && email.touched"
          />
          @if (email.hasError('required') && email.touched) {
            <span class="text-xs text-red-600">El email es obligatorio.</span>
          }
          @if (email.hasError('email') && email.touched) {
            <span class="text-xs text-red-600">Ingresa un email válido.</span>
          }
        </div>

        <!-- Password field -->
        <div class="flex flex-col gap-1.5">
          <label for="password" class="text-sm font-medium text-gray-700">Contraseña</label>
          <input
            id="password"
            type="password"
            formControlName="password"
            class="w-full rounded-xl border border-gray-300 bg-white px-3 py-2.5 text-base transition-all focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"
            [class.border-red-500]="password.invalid && password.touched"
          />
          @if (password.hasError('required') && password.touched) {
            <span class="text-xs text-red-600">La contraseña es obligatoria.</span>
          }
          <a
            routerLink="/recuperar-password"
            class="self-end text-sm font-medium text-primary hover:underline"
            [class.pointer-events-none]="loading()"
          >
            He olvidado mi contraseña
          </a>
        </div>

        <button
          type="submit"
          [disabled]="loginForm.invalid || loading()"
          class="mt-2 flex h-12 w-full items-center justify-center rounded-xl bg-primary text-base font-semibold text-white transition-colors hover:bg-primary/90 disabled:cursor-not-allowed disabled:opacity-50"
        >
          Iniciar sesión
        </button>

        <a
          routerLink="/registro"
          class="flex h-10 w-full items-center justify-center rounded-xl text-sm font-medium text-primary transition-colors hover:bg-primary/10"
          [class.pointer-events-none]="loading()"
          [class.opacity-50]="loading()"
        >
          ¿No tienes cuenta? Registrate
        </a>

        @if (error()) {
          <div class="rounded-lg bg-red-50 px-3 py-2 text-center text-sm text-red-600">
            {{ error() }}
          </div>
        }
      </form>

      @if (loading()) {
        <div class="absolute inset-0 flex items-center justify-center">
          <div class="h-10 w-10 animate-spin rounded-full border-4 border-primary/20 border-t-primary"></div>
        </div>
      }
    </div>
  </div>
</section>
