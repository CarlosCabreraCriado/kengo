@reference "tailwindcss";

:host {
  --kengo-primary: #e75c3e;
  --kengo-primary-dark: #c94a2f;
  --kengo-tertiary: #efc048;
  --kengo-success: #22c55e;
  --kengo-glass: rgba(255, 255, 255, 0.5);
  --kengo-border: rgba(255, 255, 255, 0.25);
  --kengo-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
  --kengo-shadow-primary: 0 4px 16px rgba(231, 92, 62, 0.35);
  --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  display: block;
  height: 100%;
}

.activity-page { @apply relative flex flex-col w-full h-full overflow-y-auto overflow-x-hidden; scroll-behavior: smooth; -webkit-overflow-scrolling: touch; }

/* Aurora Background */
.aurora-bg { @apply fixed inset-0 pointer-events-none overflow-hidden z-0; }
.aurora-wave { @apply absolute rounded-full; filter: blur(60px); opacity: 0.5; mix-blend-mode: multiply; }
.aurora-wave-1 { @apply w-[280px] h-[280px] -top-16 -right-16; background: radial-gradient(circle, rgba(231, 92, 62, 0.4) 0%, transparent 70%); animation: auroraFloat1 12s ease-in-out infinite; }
.aurora-wave-2 { @apply w-[220px] h-[220px] top-1/3 -left-16; background: radial-gradient(circle, rgba(239, 192, 72, 0.35) 0%, transparent 70%); animation: auroraFloat2 15s ease-in-out infinite; }
.aurora-wave-3 { @apply w-[180px] h-[180px] bottom-24 right-8; background: radial-gradient(circle, rgba(255, 180, 164, 0.3) 0%, transparent 70%); animation: auroraFloat3 10s ease-in-out infinite; }
@keyframes auroraFloat1 { 0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.5; } 50% { transform: translate(-30px, 40px) scale(1.15); opacity: 0.7; } }
@keyframes auroraFloat2 { 0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.4; } 50% { transform: translate(40px, -20px) scale(1.1); opacity: 0.6; } }
@keyframes auroraFloat3 { 0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.35; } 50% { transform: translate(-20px, -30px) scale(1.2); opacity: 0.55; } }

/* Header */
.activity-header { @apply sticky top-0 z-50 w-full; padding: env(safe-area-inset-top, 12px) 16px 12px; background: linear-gradient(180deg, rgba(254, 248, 247, 0.95) 0%, rgba(254, 248, 247, 0.8) 100%); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); }
.header-content { @apply flex items-center justify-between max-w-3xl mx-auto; }
.header-left { @apply flex items-center gap-3; }
.back-btn { @apply inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/60 border border-white/40 text-zinc-600 cursor-pointer transition-all active:scale-95; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06); }
.back-btn:hover { @apply bg-white/80 text-[#e75c3e]; }
.header-title-group { @apply flex flex-col; }
.header-title { @apply text-xl text-[#e75c3e] leading-tight m-0; }
.header-subtitle { @apply text-xs text-zinc-500 mt-0.5 m-0; }
.header-cta { @apply inline-flex items-center justify-center w-12 h-12 rounded-full text-white cursor-pointer transition-all active:scale-95; background: linear-gradient(135deg, var(--kengo-primary) 0%, var(--kengo-primary-dark) 100%); box-shadow: var(--kengo-shadow-primary); }
.header-cta:hover { transform: scale(1.05); }
.header-cta .material-symbols-outlined { @apply text-2xl; }

/* Main Content */
.activity-main { @apply relative flex-1 px-4 pt-2 z-10; padding-bottom: calc(var(--safe-area-bottom) + 100px); max-width: 1200px; margin: 0 auto; width: 100%; }
.activity-main.pt-desktop { @apply pt-6; }

/* State Cards */
.state-card { @apply relative p-8 rounded-3xl text-center overflow-hidden; background: var(--kengo-glass); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); border: 1px solid var(--kengo-border); box-shadow: var(--kengo-shadow); max-width: 400px; margin: 0 auto; }
.shimmer-effect { @apply absolute inset-0; background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.5) 50%, transparent 100%); background-size: 200% 100%; animation: shimmer 1.5s infinite; }
@keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }
.state-icon { @apply w-20 h-20 mx-auto rounded-2xl flex items-center justify-center; background: linear-gradient(135deg, #ffede8 0%, white 100%); }
.state-icon .material-symbols-outlined { @apply text-5xl text-[#e75c3e]/50; }
.state-icon.pulse { animation: pulse 2s ease-in-out infinite; }
.state-icon.error { background: linear-gradient(135deg, #fee2e2 0%, white 100%); }
.state-icon.error .material-symbols-outlined { @apply text-red-400; }
@keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); opacity: 0.8; } }
.state-title { @apply text-lg font-bold text-zinc-800 mt-4 mb-2; }
.state-text { @apply text-sm text-zinc-500 m-0; }
.state-hint { @apply text-xs text-zinc-400 mt-2 m-0; }
.retry-btn { @apply inline-flex items-center justify-center gap-2 mt-4 px-5 py-2.5 rounded-xl bg-[#e75c3e] text-white text-sm font-semibold cursor-pointer transition-all active:scale-95; box-shadow: var(--kengo-shadow-primary); }
.retry-btn:hover { transform: translateY(-2px); }
.state-visual { @apply mb-4; }
.empty-illustration { @apply relative w-24 h-24 mx-auto flex items-center justify-center; }
.empty-illustration .main-icon { @apply text-6xl text-zinc-300; }
.empty-illustration .accent-icon { @apply absolute -bottom-1 -right-1 text-2xl text-[#e75c3e]/60 bg-white rounded-full p-1; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); }

/* Content Grid */
.content-grid { @apply grid grid-cols-1 gap-6; }
.main-column { @apply flex flex-col gap-4; }
.sidebar-column { @apply flex flex-col; }

/* Hero Card */
.hero-card { @apply rounded-3xl overflow-hidden; background: var(--kengo-glass); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); border: 1px solid var(--kengo-border); box-shadow: var(--kengo-shadow); }
.hero-visual { @apply relative h-20 overflow-hidden; }
.hero-gradient { @apply absolute inset-0; }
.hero-gradient.active { background: linear-gradient(135deg, #e75c3e 0%, #f9b87e 50%, #efc048 100%); }
.hero-gradient.success { background: linear-gradient(135deg, #22c55e 0%, #86efac 50%, #efc048 100%); }
.hero-gradient.rest { background: linear-gradient(135deg, #94a3b8 0%, #cbd5e1 50%, #e2e8f0 100%); }
.hero-pattern { @apply absolute inset-0 opacity-40; background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none'%3E%3Cg fill='%23fff' fill-opacity='0.15'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"); }
.celebration-particles { @apply absolute inset-0 overflow-hidden; }
.celebration-particles span { @apply absolute w-2 h-2 rounded-full; animation: confetti 3s ease-out infinite; }
.celebration-particles span:nth-child(1) { @apply bg-[#efc048]; left: 10%; }
.celebration-particles span:nth-child(2) { @apply bg-white; left: 30%; animation-delay: 0.2s; }
.celebration-particles span:nth-child(3) { @apply bg-[#e75c3e]; left: 50%; animation-delay: 0.4s; }
.celebration-particles span:nth-child(4) { @apply bg-[#22c55e]; left: 70%; animation-delay: 0.6s; }
.celebration-particles span:nth-child(5) { @apply bg-white; left: 90%; animation-delay: 0.8s; }
@keyframes confetti { 0% { transform: translateY(-10px) rotate(0deg); opacity: 1; } 100% { transform: translateY(80px) rotate(720deg); opacity: 0; } }
.hero-content { @apply relative flex items-center gap-4 p-4 -mt-6; }
.hero-icon { @apply w-16 h-16 rounded-2xl flex items-center justify-center shrink-0 bg-white; box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15); }
.hero-icon .material-symbols-outlined { @apply text-3xl; }
.hero-icon.success .material-symbols-outlined { color: var(--kengo-success); }
.hero-icon.rest .material-symbols-outlined { @apply text-slate-400; }
.hero-badge { @apply flex flex-col items-center justify-center w-16 h-16 rounded-2xl shrink-0; background: linear-gradient(135deg, var(--kengo-primary) 0%, var(--kengo-primary-dark) 100%); box-shadow: 0 4px 16px rgba(231, 92, 62, 0.4); }
.hero-badge .badge-count { @apply text-2xl font-bold text-white leading-none; }
.hero-badge .badge-label { @apply text-[0.6rem] text-white/80 uppercase tracking-wide mt-0.5; }
.hero-info { @apply flex flex-col min-w-0 flex-1; }
.hero-title { @apply text-lg font-bold text-zinc-800 m-0; }
.hero-subtitle { @apply text-sm text-zinc-500 m-0 mt-0.5 truncate; }
.hero-progress { @apply flex items-center gap-3 px-4 pb-4; }
.progress-track { @apply flex-1 h-2 rounded-full bg-black/5 overflow-hidden; }
.progress-fill { @apply h-full rounded-full transition-all duration-500; background: linear-gradient(90deg, var(--kengo-primary) 0%, var(--kengo-tertiary) 100%); }
.progress-text { @apply text-xs font-medium text-zinc-500 whitespace-nowrap; }
.hero-cta { @apply flex items-center justify-center gap-2 mx-4 mb-4 h-14 rounded-2xl text-white font-semibold cursor-pointer transition-all active:scale-[0.98]; background: linear-gradient(135deg, var(--kengo-primary) 0%, var(--kengo-primary-dark) 100%); box-shadow: var(--kengo-shadow-primary); }
.hero-cta:hover { transform: translateY(-2px); box-shadow: 0 6px 24px rgba(231, 92, 62, 0.45); }
.hero-cta .material-symbols-outlined { @apply text-2xl; }
.cta-text { @apply text-base; }
.cta-badge { @apply ml-1 px-2 py-0.5 rounded-full bg-white/20 text-xs; }
.hero-stats { @apply flex items-center justify-center gap-6 px-4 pb-4; }
.stat-item { @apply flex flex-col items-center; }
.stat-value { @apply text-2xl font-bold text-[#22c55e]; }
.stat-label { @apply text-xs text-zinc-500; }
.stat-divider { @apply w-px h-8 bg-zinc-200; }

/* Plans Section */
.plans-section { @apply flex flex-col; }
.section-header { @apply flex items-center justify-between mb-3; }
.section-header.sticky { @apply flex items-center gap-3 p-4 border-b border-white/20 bg-white/20 mb-0; }
.section-icon { @apply w-10 h-10 rounded-xl flex items-center justify-center shrink-0; background: linear-gradient(135deg, rgba(231, 92, 62, 0.12) 0%, rgba(239, 192, 72, 0.08) 100%); }
.section-icon .material-symbols-outlined { @apply text-xl text-[#e75c3e]; }
.section-title { @apply text-base font-semibold text-zinc-700 m-0; }
.section-subtitle { @apply text-xs text-zinc-400 m-0 mt-0.5; }
.section-badge { @apply px-2.5 py-1 rounded-full bg-[#e75c3e]/10 text-xs font-semibold text-[#e75c3e]; }
.plans-list { @apply flex flex-col gap-3; }

/* Plan Card */
.plan-card { @apply rounded-2xl overflow-hidden; background: var(--kengo-glass); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid var(--kengo-border); box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08); transition: box-shadow 0.3s ease, transform 0.3s ease; }
.plan-card:hover { box-shadow: var(--kengo-shadow); transform: translateY(-2px); }
.plan-card.completed { @apply opacity-80; }
.plan-header { @apply flex items-center justify-between gap-3 px-4 py-3 bg-white/30 border-b border-white/20; }
.plan-info { @apply flex-1 min-w-0; }
.plan-title { @apply text-sm font-semibold text-zinc-800 m-0 truncate; }
.plan-progress { @apply flex items-center gap-2 mt-1.5; }
.progress-bar { @apply flex-1 h-1.5 rounded-full bg-zinc-200/60 overflow-hidden; max-width: 100px; }
.progress-value { @apply h-full rounded-full transition-all duration-300; background: var(--kengo-primary); }
.progress-value.complete { background: var(--kengo-success); }
.progress-label { @apply text-xs text-zinc-500; }
.plan-badge.complete .material-symbols-outlined { @apply text-2xl text-[#22c55e]; }

/* Exercises List */
.exercises-list { @apply divide-y divide-black/5 list-none m-0 p-0; }
.exercise-item { @apply flex items-center gap-3 px-4 py-3 transition-all; }
.exercise-item.completed { @apply bg-zinc-50/50 opacity-70; }
.exercise-status { @apply shrink-0; }
.status-check { @apply w-6 h-6 rounded-full bg-[#22c55e] flex items-center justify-center; }
.status-check .material-symbols-outlined { @apply text-sm text-white; }
.status-pending { @apply w-6 h-6 rounded-full border-2 border-zinc-300; }
.exercise-thumb { @apply w-12 h-12 rounded-xl overflow-hidden bg-zinc-100 shrink-0; }
.exercise-thumb img { @apply w-full h-full object-cover; }
.thumb-placeholder { @apply w-full h-full flex items-center justify-center bg-gradient-to-br from-zinc-100 to-zinc-50; }
.thumb-placeholder .material-symbols-outlined { @apply text-xl text-zinc-400; }
.thumb-placeholder.small .material-symbols-outlined { @apply text-lg; }
.exercise-info { @apply flex flex-col min-w-0 flex-1; }
.exercise-name { @apply text-sm font-medium text-zinc-800 truncate; }
.exercise-item.completed .exercise-name { @apply line-through text-zinc-500; }
.exercise-details { @apply text-xs text-zinc-500 mt-0.5; }
.detail-separator { @apply mx-1 text-zinc-300; }
.plan-footer { @apply p-3 pt-1; }
.plan-action { @apply flex items-center justify-center gap-2 w-full h-11 rounded-xl text-white text-sm font-semibold cursor-pointer transition-all active:scale-[0.98]; background: linear-gradient(135deg, var(--kengo-primary) 0%, var(--kengo-primary-dark) 100%); box-shadow: 0 2px 8px rgba(231, 92, 62, 0.25); }
.plan-action:hover { box-shadow: 0 4px 12px rgba(231, 92, 62, 0.35); }
.plan-action.secondary { @apply text-zinc-600; background: linear-gradient(135deg, #f4f4f5 0%, #e4e4e7 100%); box-shadow: none; }
.plan-action.secondary:hover { @apply bg-zinc-200; }
.plan-action .material-symbols-outlined { @apply text-lg; }

/* Upcoming Section */
.upcoming-section { @apply rounded-3xl overflow-hidden; background: var(--kengo-glass); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); border: 1px solid var(--kengo-border); box-shadow: var(--kengo-shadow); }
.upcoming-list { @apply divide-y divide-black/5; }

/* Day Card */
.day-card { @apply overflow-hidden transition-all; }
.day-card.expanded { @apply bg-white/30; }
.day-header { @apply flex items-center gap-3 w-full px-4 py-3 text-left cursor-pointer transition-colors bg-transparent border-none; }
.day-header:hover { @apply bg-white/30; }
.day-date { @apply flex flex-col min-w-[4.5rem]; }
.day-name { @apply text-sm font-semibold text-zinc-800; }
.day-number { @apply text-xs text-zinc-500; }
.day-summary { @apply flex flex-col flex-1 items-end; }
.exercise-count { @apply text-sm font-semibold text-[#e75c3e]; }
.count-label { @apply font-normal text-zinc-500 ml-1; }
.plans-count { @apply text-xs text-zinc-400 mt-0.5; }
.expand-icon { @apply text-xl text-zinc-400 transition-transform shrink-0; }
.expand-icon.rotated { transform: rotate(180deg); }
.day-content { @apply px-4 pb-4; animation: expandIn 0.25s ease-out; }
@keyframes expandIn { from { opacity: 0; transform: translateY(-8px); } to { opacity: 1; transform: translateY(0); } }
.day-exercises { @apply list-none m-0 p-0 space-y-2 mb-3; }
.day-exercise-item { @apply flex items-center gap-3 p-2.5 rounded-xl bg-white/40 border border-white/30; }
.day-exercise-thumb { @apply w-10 h-10 rounded-lg overflow-hidden bg-zinc-100 shrink-0; }
.day-exercise-thumb img { @apply w-full h-full object-cover; }
.day-exercise-info { @apply flex flex-col min-w-0 flex-1; }
.day-exercise-name { @apply text-sm font-medium text-zinc-800 truncate; }
.day-exercise-details { @apply text-xs text-zinc-500 mt-0.5; }
.plan-tag { @apply ml-1 px-1.5 py-0.5 rounded bg-[#e75c3e]/10 text-[#e75c3e] text-[0.65rem] font-medium; }
.day-action { @apply flex items-center justify-center gap-2 w-full h-10 rounded-xl text-white text-sm font-semibold cursor-pointer transition-all active:scale-[0.98]; background: linear-gradient(135deg, var(--kengo-primary) 0%, var(--kengo-primary-dark) 100%); box-shadow: 0 2px 8px rgba(231, 92, 62, 0.25); }
.day-action:hover { box-shadow: 0 4px 12px rgba(231, 92, 62, 0.35); }
.action-badge { @apply ml-1 px-2 py-0.5 rounded-full bg-white/20 text-xs; }

/* Animations & Utilities */
.animate-in { animation: fadeInUp 0.4s ease-out forwards; animation-delay: var(--delay, 0s); opacity: 0; }
@keyframes fadeInUp { from { opacity: 0; transform: translateY(16px); } to { opacity: 1; transform: translateY(0); } }
.icon-filled { font-variation-settings: "FILL" 1, "wght" 400, "GRAD" 0, "opsz" 24; }

/* Desktop */
@media (min-width: 1024px) {
  .activity-main { @apply px-8 pt-6; padding-bottom: 32px; }
  .content-grid { @apply grid-cols-5 gap-8; }
  .main-column { @apply col-span-3; }
  .sidebar-column { @apply col-span-2; }
  .upcoming-section { @apply sticky top-4; }
  .hero-visual { @apply h-24; }
  .hero-content { @apply -mt-8; }
  .hero-icon, .hero-badge { @apply w-20 h-20; }
  .hero-icon .material-symbols-outlined { @apply text-4xl; }
  .hero-badge .badge-count { @apply text-3xl; }
  .hero-title { @apply text-xl; }
  .hero-cta { @apply h-16 text-base; }
  .plan-card { @apply rounded-3xl; }
  .state-card { max-width: 480px; }
}
