@reference "tailwindcss";

:host {
  /* Color variables now defined globally via ThemeService */
  --kengo-success: #22c55e;
  --kengo-glass: rgba(255, 255, 255, 0.5);
  --kengo-border: rgba(255, 255, 255, 0.25);
  --kengo-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
  --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  display: block;
}

.estadisticas-container {
  @apply relative flex flex-col px-4 pt-2;
  padding-bottom: calc(var(--safe-area-bottom) + 100px);
  max-width: 1200px;
  margin: 0 auto;
  width: 100%;
}

/* State Cards */
.state-card {
  @apply relative p-8 rounded-3xl text-center overflow-hidden;
  background: var(--kengo-glass);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid var(--kengo-border);
  box-shadow: var(--kengo-shadow);
  max-width: 400px;
  margin: 0 auto;
}

.shimmer-effect {
  @apply absolute inset-0;
  background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.5) 50%, transparent 100%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.state-icon {
  @apply w-20 h-20 mx-auto rounded-2xl flex items-center justify-center;
  background: linear-gradient(135deg, #ffede8 0%, white 100%);
}

.state-icon .material-symbols-outlined {
  @apply text-5xl;
  color: rgba(var(--kengo-primary-rgb), 0.5);
}

.state-icon.pulse {
  animation: pulse 2s ease-in-out infinite;
}

.state-icon.error {
  background: linear-gradient(135deg, #fee2e2 0%, white 100%);
}

.state-icon.error .material-symbols-outlined {
  @apply text-red-400;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); opacity: 0.8; }
}

.state-title {
  @apply text-lg font-bold text-zinc-800 mt-4 mb-2;
}

.state-text {
  @apply text-sm text-zinc-500 m-0;
}

.state-hint {
  @apply text-xs text-zinc-400 mt-2 m-0;
}

.retry-btn {
  @apply inline-flex items-center justify-center gap-2 mt-4 px-5 py-2.5 rounded-xl text-white text-sm font-semibold cursor-pointer transition-all active:scale-95;
  background-color: var(--kengo-primary);
  box-shadow: var(--kengo-shadow-primary);
}

.retry-btn:hover {
  transform: translateY(-2px);
}

.state-visual {
  @apply mb-4;
}

.empty-illustration {
  @apply relative w-24 h-24 mx-auto flex items-center justify-center;
}

.empty-illustration .main-icon {
  @apply text-6xl text-zinc-300;
}

.empty-illustration .accent-icon {
  @apply absolute -bottom-1 -right-1 text-2xl bg-white rounded-full p-1;
  color: rgba(var(--kengo-primary-rgb), 0.6);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* Stats Grid */
.stats-grid {
  @apply grid grid-cols-1 gap-4;
}

/* Stats Card */
.stats-card {
  @apply rounded-3xl overflow-hidden;
  background: var(--kengo-glass);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid var(--kengo-border);
  box-shadow: var(--kengo-shadow);
}

.card-header {
  @apply flex items-center gap-3 p-4 border-b border-white/20;
}

.card-icon {
  @apply w-10 h-10 rounded-xl flex items-center justify-center shrink-0;
  background: linear-gradient(135deg, rgba(var(--kengo-primary-rgb), 0.12) 0%, rgba(var(--kengo-tertiary-rgb), 0.08) 100%);
}

.card-icon .material-symbols-outlined {
  @apply text-xl;
  color: var(--kengo-primary);
}

.card-title {
  @apply text-base font-semibold text-zinc-800 m-0;
}

.card-subtitle {
  @apply text-xs text-zinc-400 m-0 mt-0.5;
}

/* Summary Card */
.summary-content {
  @apply p-4;
}

.summary-stats {
  @apply flex items-center justify-center gap-8;
}

.summary-stat {
  @apply flex flex-col items-center;
}

.stat-number {
  @apply text-3xl font-bold;
  color: var(--kengo-primary);
}

.stat-label {
  @apply text-xs text-zinc-500 mt-1;
}

.stat-divider {
  @apply w-px h-12 bg-zinc-200;
}

/* Streak Card */
.streak-card {
  @apply p-4;
}

.streak-content {
  @apply flex items-center gap-4;
}

.streak-icon {
  @apply w-14 h-14 rounded-2xl flex items-center justify-center;
  background: linear-gradient(135deg, #f4f4f5 0%, #e4e4e7 100%);
}

.streak-icon .material-symbols-outlined {
  @apply text-3xl text-zinc-400;
}

.streak-icon.active {
  background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
}

.streak-icon.active .material-symbols-outlined {
  @apply text-orange-500;
  animation: flicker 1.5s ease-in-out infinite;
}

@keyframes flicker {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.8; transform: scale(1.05); }
}

.streak-info {
  @apply flex flex-col;
}

.streak-number {
  @apply text-2xl font-bold text-zinc-800;
}

.streak-label {
  @apply text-sm text-zinc-500;
}

.streak-message {
  @apply text-xs text-zinc-400 mt-2 m-0;
}

/* Chart Card */
.chart-card {
  @apply p-4;
}

.chart-card .card-header {
  @apply p-0 pb-4 border-b-0;
}

.chart-container {
  @apply mt-2;
}

.chart-bars {
  @apply flex items-end justify-between gap-2 h-32;
}

.chart-bar-wrapper {
  @apply flex-1 flex flex-col items-center gap-2;
}

.chart-bar-container {
  @apply relative w-full h-24 flex items-end justify-center;
}

.chart-bar {
  @apply w-full max-w-8 rounded-t-lg transition-all duration-500;
  background: linear-gradient(135deg, #e4e4e7 0%, #d4d4d8 100%);
  min-height: 4px;
}

.chart-bar.has-activity {
  background: linear-gradient(135deg, var(--kengo-primary) 0%, var(--kengo-tertiary) 100%);
}

.chart-bar.today {
  box-shadow: 0 2px 8px rgba(var(--kengo-primary-rgb), 0.3);
}

.bar-value {
  @apply absolute -top-5 left-1/2 -translate-x-1/2 text-xs font-semibold;
  color: var(--kengo-primary);
}

.chart-label {
  @apply text-xs text-zinc-400 font-medium;
}

.chart-label.today {
  @apply font-semibold;
  color: var(--kengo-primary);
}

/* Monthly Card */
.monthly-content {
  @apply flex items-center gap-6 p-4;
}

.progress-circle {
  @apply relative w-20 h-20 shrink-0;
}

.circular-chart {
  @apply w-full h-full;
}

.circle-bg {
  fill: none;
  stroke: #e4e4e7;
  stroke-width: 3.8;
}

.circle {
  fill: none;
  stroke: var(--kengo-primary);
  stroke-width: 3.8;
  stroke-linecap: round;
  transform: rotate(-90deg);
  transform-origin: center;
  transition: stroke-dasharray 0.5s ease;
}

.progress-value {
  @apply absolute inset-0 flex items-center justify-center text-lg font-bold text-zinc-800;
}

.monthly-stats {
  @apply flex flex-col gap-2;
}

.monthly-stat {
  @apply flex items-center gap-2 text-sm text-zinc-600;
}

.monthly-stat .material-symbols-outlined {
  @apply text-lg text-[#22c55e];
}

/* Recent Card */
.recent-list {
  @apply list-none m-0 p-0 divide-y divide-black/5;
}

.recent-item {
  @apply flex items-center gap-3 px-4 py-3;
}

.recent-thumb {
  @apply w-10 h-10 rounded-lg overflow-hidden bg-zinc-100 shrink-0;
}

.recent-thumb img {
  @apply w-full h-full object-cover;
}

.thumb-placeholder {
  @apply w-full h-full flex items-center justify-center bg-gradient-to-br from-zinc-100 to-zinc-50;
}

.thumb-placeholder .material-symbols-outlined {
  @apply text-lg text-zinc-400;
}

.recent-info {
  @apply flex flex-col min-w-0 flex-1;
}

.recent-name {
  @apply text-sm font-medium text-zinc-800 truncate;
}

.recent-time {
  @apply text-xs text-zinc-400 mt-0.5;
}

.recent-check {
  @apply text-xl text-[#22c55e] shrink-0;
}

/* Animations & Utilities */
.animate-in {
  animation: fadeInUp 0.4s ease-out forwards;
  animation-delay: var(--delay, 0s);
  opacity: 0;
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}

.icon-filled {
  font-variation-settings: "FILL" 1, "wght" 400, "GRAD" 0, "opsz" 24;
}

/* Desktop (>= 768px) */
@media (min-width: 768px) {
  .estadisticas-container {
    @apply px-8 pt-4;
    padding-bottom: 32px;
  }

  .stats-grid {
    @apply grid-cols-2 gap-6;
  }

  .chart-card {
    @apply col-span-2;
  }

  .recent-card {
    @apply col-span-2;
  }

  .chart-bars {
    @apply h-40;
  }

  .chart-bar-container {
    @apply h-32;
  }

  .chart-bar {
    @apply max-w-12;
  }

  .state-card {
    max-width: 480px;
  }
}
