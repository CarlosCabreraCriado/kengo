<!-- Navegación Kengo - Desktop Only -->
@if (showNavbar()) {
  <!-- DESKTOP: Top Navigation Bar -->
  <header class="fixed top-0 left-0 right-0 z-50 p-4 lg:p-5">
    <div class="nav-glass-desktop">
      <!-- Logo -->
      <a routerLink="/inicio" class="logo-container group">
        <img
          [src]="logoUrl()"
          alt="Kengo"
          class="logo-img"
          (error)="onLogoError()"
        />
        <div class="logo-glow"></div>
      </a>

      <!-- Navegación central -->
      <nav class="nav-center">
        <a
          routerLink="/inicio"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
          class="nav-item-desktop"
        >
          <img
            [src]="logoIconUrl()"
            alt="Inicio"
            class="nav-icon-desktop"
            (error)="onLogoError()"
          />
          <span class="nav-label-desktop">Inicio</span>
        </a>

        <a
          routerLink="/actividad-personal"
          routerLinkActive="active"
          class="nav-item-desktop"
        >
          <span class="material-symbols-outlined icon-default">exercise</span>
          <span class="material-symbols-outlined icon-active relleno"
            >exercise</span
          >
          <span class="nav-label-desktop">Actividad</span>
        </a>

        <a
          routerLink="/galeria"
          routerLinkActive="active"
          class="nav-item-desktop"
        >
          <span class="material-symbols-outlined icon-default"
            >play_circle</span
          >
          <span class="material-symbols-outlined icon-active relleno"
            >play_circle</span
          >
          <span class="nav-label-desktop">Galeria</span>
        </a>

        @if (isFisio()) {
          <a
            routerLink="/mis-pacientes"
            routerLinkActive="active"
            class="nav-item-desktop"
          >
            <span class="material-symbols-outlined icon-default"
              >group</span
            >
            <span class="material-symbols-outlined icon-active relleno"
              >group</span
            >
            <span class="nav-label-desktop">Pacientes</span>
          </a>
        }

        <a
          routerLink="/mi-clinica"
          routerLinkActive="active"
          class="nav-item-desktop"
        >
          <span class="material-symbols-outlined icon-default"
            >apartment</span
          >
          <span class="material-symbols-outlined icon-active relleno"
            >apartment</span
          >
          <span class="nav-label-desktop">Clínica</span>
        </a>
      </nav>

      <!-- Avatar desktop con menú desplegable -->
      <div class="avatar-menu-container">
        <button
          type="button"
          class="avatar-desktop group"
          [class.menu-open]="menuAbierto()"
          (click)="toggleMenu()"
          aria-label="Abrir menú de usuario"
          [attr.aria-expanded]="menuAbierto()"
        >
          <div class="avatar-container-desktop">
            @if (avatarUrl()) {
              <img [src]="avatarUrl()" alt="Perfil" class="avatar-img" />
            } @else {
              <div class="avatar-placeholder">
                <span class="material-symbols-outlined text-lg">person</span>
              </div>
            }
            <div class="avatar-ring-desktop"></div>
          </div>
          <div class="avatar-glow"></div>
        </button>

        @if (menuAbierto()) {
          <div class="user-menu" role="menu">
            <button
              type="button"
              class="menu-item"
              role="menuitem"
              (click)="irAPerfil()"
            >
              <span class="material-symbols-outlined">person</span>
              <span>Mi perfil</span>
            </button>
            <button
              type="button"
              class="menu-item menu-item-danger"
              role="menuitem"
              (click)="cerrarSesion()"
            >
              <span class="material-symbols-outlined">logout</span>
              <span>Cerrar sesión</span>
            </button>
          </div>

          <div
            class="menu-backdrop"
            (click)="cerrarMenu()"
            aria-hidden="true"
          ></div>
        }
      </div>
    </div>
  </header>
}
