<section class="inicio-container">
  <!-- Header con logo -->
  <header class="inicio-header">
    <img src="assets/logo-kengo-horizontal.svg" alt="Kengo" class="logo" />

    <!-- Botón logout -->
    <button
      mat-icon-button
      class="logout-btn"
      aria-label="Cerrar sesión"
      (click)="confirmarLogout()"
    >
      <mat-icon class="material-symbols-outlined">logout</mat-icon>
    </button>
  </header>

  <!-- Carousel de cards -->
  <div class="carousel-wrapper">
    <div #carousel class="carousel">
      @for (card of cards(); track card.id; let i = $index) {
        <article
          class="card"
          [class.active]="currentIndex() === i"
          (click)="navigateToCard(card)"
        >
          <div class="card-image-container">
            <img
              [src]="card.image"
              [alt]="card.title"
              class="card-image"
              loading="lazy"
            />
            <div class="card-overlay"></div>

            <!-- Badge dinámico -->
            @if (getCardBadgeType(card); as badgeType) {
              <div class="card-badge" [attr.data-type]="badgeType">
                @switch (badgeType) {
                  @case ("loading") {
                    <div class="badge-spinner"></div>
                  }
                  @case ("pending") {
                    <span class="badge-number">{{
                      getCardBadgeCount(card)
                    }}</span>
                  }
                  @case ("completed") {
                    <mat-icon class="badge-icon">check_circle</mat-icon>
                  }
                  @case ("rest") {
                    <mat-icon class="badge-icon">self_improvement</mat-icon>
                  }
                }
              </div>
            }
          </div>
          <div class="card-content">
            <h2 class="card-title">{{ card.title }}</h2>
            <p class="card-subtitle">{{ getCardSubtitle(card) }}</p>
          </div>
        </article>
      }
    </div>
  </div>

  <!-- Indicadores de paginación -->
  <nav class="pagination-dots" aria-label="Navegación del carousel">
    @for (card of cards(); track card.id; let i = $index) {
      <button
        type="button"
        class="dot"
        [class.active]="currentIndex() === i"
        (click)="scrollToCard(i)"
        [attr.aria-label]="'Ir a ' + card.title"
        [attr.aria-current]="currentIndex() === i ? 'true' : null"
      ></button>
    }
  </nav>
</section>
