<!-- Navegacion -->
<header
  class="fixed left-0 z-100 w-full overflow-visible p-3 md:p-5"
  [class.bottom-0]="isMovil"
  [class.top-0]="!isMovil"
>
  <div
    class="relative m-auto flex w-full max-w-7xl items-center justify-between rounded-full border-white/20 bg-white/60 shadow-xl backdrop-blur-md backdrop-filter md:h-full md:pr-3 md:pl-5"
    [class.h-16]="isMovil"
    [class.h-full]="!isMovil"
  >
    <!-- Logo (solo desktop) -->
    <a routerLink="/inicio" class="hidden md:block">
      <div class="fuente-kengo text-center text-3xl">Kengo</div>
    </a>

    <!-- Navegación -->
    <nav class="nav-container" [class.nav-mobile]="isMovil">
      <!-- INICIO -->
      <a
        routerLink="/inicio"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }"
        class="nav-item"
      >
        <img
          src="/assets/logo.svg"
          alt="Icono inicio"
          class="nav-icon h-6 w-6"
        />
        <span class="nav-label">Inicio</span>
      </a>

      <!-- EJERCICIOS -->
      <a
        routerLink="/ejercicios"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="material-symbols-outlined nav-icon">exercise</span>
        <span class="nav-label">Ejercicios</span>
      </a>

      <!-- PACIENTES (solo fisio) -->
      @if (isFisio()) {
        <a
          routerLink="/mis-pacientes"
          routerLinkActive="active"
          class="nav-item"
        >
          <span class="material-symbols-outlined nav-icon">personal_injury</span>
          <span class="nav-label">Pacientes</span>
        </a>
      }

      <!-- CLÍNICA -->
      <a
        routerLink="/mi-clinica"
        routerLinkActive="active"
        class="nav-item"
      >
        <span class="material-symbols-outlined nav-icon">business</span>
        <span class="nav-label">Clínica</span>
      </a>

      <!-- Avatar (solo móvil dentro del nav) -->
      @if (isMovil) {
        <button
          type="button"
          [matMenuTriggerFor]="avatarMenuMobile"
          class="nav-item avatar-btn"
        >
          @if (avatarUrl()) {
            <img
              [src]="avatarUrl()"
              class="h-10 w-10 rounded-full border-2 border-solid border-white/50"
              alt="Avatar"
            />
          } @else {
            <div
              class="flex h-10 w-10 items-center justify-center rounded-full bg-zinc-400/40"
            >
              <span class="material-symbols-outlined text-white">person</span>
            </div>
          }
        </button>

        <mat-menu #avatarMenuMobile="matMenu" xPosition="before" yPosition="above">
          <button mat-menu-item routerLink="/perfil">
            <mat-icon class="material-symbols-outlined">account_circle</mat-icon>
            <span>Editar perfil</span>
          </button>
          <button mat-menu-item (click)="logout()">
            <mat-icon class="material-symbols-outlined">logout</mat-icon>
            <span>Cerrar sesión</span>
          </button>
        </mat-menu>
      }
    </nav>

    <!-- Avatar (solo desktop) -->
    @if (!isMovil) {
      <button
        type="button"
        [matMenuTriggerFor]="avatarMenuDesktop"
        class="rounded-full border-2 border-transparent p-0 transition-colors duration-200 hover:border-orange-500"
      >
        @if (avatarUrl()) {
          <img
            [src]="avatarUrl()"
            class="h-10 w-10 rounded-full border-2 border-solid"
            alt="Avatar"
          />
        } @else {
          <div
            class="flex h-10 w-10 items-center justify-center rounded-full bg-zinc-400/40"
          >
            <span class="material-symbols-outlined text-white">person</span>
          </div>
        }
      </button>

      <mat-menu #avatarMenuDesktop="matMenu" xPosition="before" yPosition="below">
        <button mat-menu-item routerLink="/perfil">
          <mat-icon class="material-symbols-outlined">account_circle</mat-icon>
          <span>Editar perfil</span>
        </button>
        <button mat-menu-item (click)="logout()">
          <mat-icon class="material-symbols-outlined">logout</mat-icon>
          <span>Cerrar sesión</span>
        </button>
      </mat-menu>
    }
  </div>
</header>
